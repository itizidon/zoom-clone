{"ast":null,"code":"var _jsxFileName = \"/home/don/projects/zoom-clone/src/components/Room.js\";\nimport React, { useEffect, useRef } from 'react';\nimport io from 'socket.io-client';\nconst socket = io('http://localhost:8000');\n\nconst openMediaDevices = async constraints => {\n  return await navigator.mediaDevices.getUserMedia(constraints);\n};\n\nlet stream;\nlet sdp;\n\nfunction Room() {\n  const userVideo = useRef();\n  useEffect(() => {\n    const peerConnection = new RTCPeerConnection();\n\n    async function getStream() {\n      try {\n        stream = await openMediaDevices({\n          video: true,\n          audio: true\n        });\n        userVideo.current.srcObject = stream;\n      } catch (error) {\n        console.error('Error accessing media devices.', error);\n      }\n    }\n\n    getStream();\n    peerConnection.addStream(stream);\n\n    async function offer() {\n      sdp = await peerConnection.createOffer();\n    }\n\n    offer();\n    peerConnection.setLocalDescription(sdp);\n    socket.emit('offer', peerConnection.localDescription);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"video\", {\n    autoPlay: true,\n    ref: userVideo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default Room;","map":{"version":3,"sources":["/home/don/projects/zoom-clone/src/components/Room.js"],"names":["React","useEffect","useRef","io","socket","openMediaDevices","constraints","navigator","mediaDevices","getUserMedia","stream","sdp","Room","userVideo","peerConnection","RTCPeerConnection","getStream","video","audio","current","srcObject","error","console","addStream","offer","createOffer","setLocalDescription","emit","localDescription"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,MAA3B,QAAyC,OAAzC;AACA,OAAOC,EAAP,MAAe,kBAAf;AAEA,MAAMC,MAAM,GAAGD,EAAE,CAAC,uBAAD,CAAjB;;AAEA,MAAME,gBAAgB,GAAG,MAAMC,WAAN,IAAqB;AAC5C,SAAO,MAAMC,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoCH,WAApC,CAAb;AACD,CAFD;;AAIA,IAAII,MAAJ;AACA,IAAIC,GAAJ;;AAEA,SAASC,IAAT,GAAgB;AACd,QAAMC,SAAS,GAAGX,MAAM,EAAxB;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMa,cAAc,GAAG,IAAIC,iBAAJ,EAAvB;;AAEA,mBAAeC,SAAf,GAA2B;AACzB,UAAI;AACFN,QAAAA,MAAM,GAAG,MAAML,gBAAgB,CAAC;AAAEY,UAAAA,KAAK,EAAE,IAAT;AAAeC,UAAAA,KAAK,EAAE;AAAtB,SAAD,CAA/B;AACAL,QAAAA,SAAS,CAACM,OAAV,CAAkBC,SAAlB,GAA8BV,MAA9B;AACD,OAHD,CAGE,OAAOW,KAAP,EAAc;AACdC,QAAAA,OAAO,CAACD,KAAR,CAAc,gCAAd,EAAgDA,KAAhD;AACD;AACF;;AACDL,IAAAA,SAAS;AAETF,IAAAA,cAAc,CAACS,SAAf,CAAyBb,MAAzB;;AACA,mBAAec,KAAf,GAAuB;AACrBb,MAAAA,GAAG,GAAG,MAAMG,cAAc,CAACW,WAAf,EAAZ;AACD;;AACDD,IAAAA,KAAK;AAELV,IAAAA,cAAc,CAACY,mBAAf,CAAmCf,GAAnC;AAEAP,IAAAA,MAAM,CAACuB,IAAP,CAAY,OAAZ,EAAqBb,cAAc,CAACc,gBAApC;AACD,GAtBQ,EAsBN,EAtBM,CAAT;AAwBA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAO,IAAA,QAAQ,MAAf;AAAgB,IAAA,GAAG,EAAEf,SAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF;AAKD;;AAED,eAAeD,IAAf","sourcesContent":["import React, { useEffect, useRef } from 'react'\nimport io from 'socket.io-client'\n\nconst socket = io('http://localhost:8000')\n\nconst openMediaDevices = async constraints => {\n  return await navigator.mediaDevices.getUserMedia(constraints)\n}\n\nlet stream\nlet sdp\n\nfunction Room() {\n  const userVideo = useRef()\n\n  useEffect(() => {\n    const peerConnection = new RTCPeerConnection()\n\n    async function getStream() {\n      try {\n        stream = await openMediaDevices({ video: true, audio: true })\n        userVideo.current.srcObject = stream\n      } catch (error) {\n        console.error('Error accessing media devices.', error)\n      }\n    }\n    getStream()\n\n    peerConnection.addStream(stream)\n    async function offer() {\n      sdp = await peerConnection.createOffer()\n    }\n    offer()\n\n    peerConnection.setLocalDescription(sdp)\n\n    socket.emit('offer', peerConnection.localDescription)\n  }, [])\n\n  return (\n    <div>\n      <video autoPlay ref={userVideo}></video>\n    </div>\n  )\n}\n\nexport default Room\n"]},"metadata":{},"sourceType":"module"}